# Cellact SDK Documentation

Welcome to the Cellact SDK documentation. This SDK is designed to facilitate blockchain integration into your applications, providing a wide range of functionalities from network configurations to smart contract interactions and utility functions.

## Table of Contents

- [Introduction](#introduction)
- [Installation](#installation)
- [Configuration](#configuration)
  - [Contracts](#contracts)
  - [Network](#network)
- [Cellact Components](#cellact-components)
  - [CellContracts](#cellcontracts)
  - [Cloud Functions](#cloud-functions)
  - [Config Service Provider](#config-service-provider)
  - [Ethereum Network](#ethereum-network)
  - [Mumbai Network](#mumbai-network)
  - [Initialization](#initialization)
    - [InitAppWeb2](#initappweb2)
    - [InitAppWeb3](#initappweb3)
  - [Utilities](#Utils)
  - [Wallet](#wallet)
  - [Web3AJ](#web3aj)
- [Examples](#examples)
- [Contributing](#contributing)
- [License](#license)

## Introduction

The Cellact SDK offers a robust set of tools for developers looking to incorporate blockchain features into their applications. This includes managing network configurations, interacting with smart contracts, and performing a variety of blockchain-related tasks.

## Installation

Instructions on how to install and configure the SDK in your project.

## Configuration

### Contracts

The `Contracts` abstraction in the `Config` folder allows for easy management of contract addresses and related functionalities.

- **NAME_HASH_ADDRESS**: Address for the NameHash contract.
- **W_ENS_ADDRESS**: Address for the Wrapped ENS contract - .web3 (generated by cellact)

### Network

The `Network` abstraction facilitates the configuration of different blockchain networks.

- **ENTRY_POINT_URL**: URL for the network's entry point.
- **CHAIN_ID**: Identifier for the blockchain network.

## Cellact Components

Detailed overview of each component within the `Cellact` directory.

### CellContracts

Extends `Contracts` to provide specific contract addresses for the Cellact ecosystem.

### Cloud Functions

Includes methods to interact with cloud functions for tasks such as retrieving user ENS or service provider details.

    getUserENS(String userAddress): Sends a request to a cloud function to retrieve the ENS name associated with the given user address.

    getShopCID(String serviceProvider): Fetches the CID of the shop associated with the given service provider. This CID can be used to access the shop's content on IPFS.

### Config Service Provider

Manages service provider configurations, allowing for customization of service provider-related functionalities.

### Ethereum

Configures the SDK to interact with the Ethereum blockchain.

### Mumbai

Configures the SDK for interaction with the Polygon Mumbai test network.

### Initialization

#### InitAppWeb2

    ## InitAppWeb2 Overview

    ## Disclaimer and Usage Guide for `InitAppWeb2`

    ### Disclaimer

    The `InitAppWeb2` class is provided as a conceptual example to illustrate how Web2 applications can interact with blockchain technologies using the Cellact SDK. This class demonstrates a series of operations from initializing network connections to executing blockchain transactions, all within a synchronous, step-by-step execution model typical in Web2 environments.

    ### Purpose

    This example aims to bridge the gap for developers familiar with traditional web applications (Web2) by providing a straightforward, procedural approach to blockchain interactions. It showcases essential operations such as wallet creation, transaction signing, and smart contract interactions, contextualized within a Web2 application flow.

    ### Synchronous Process Execution

    The use of `Scanner` and user input prompts in `InitAppWeb2` is deliberate, serving two primary purposes:

    1. **Interactivity**: By prompting for user input, the class simulates real-world scenarios where user actions trigger blockchain operations. This interactivity helps developers understand the cause and effect within blockchain applications.

    2. **Process Synchronization**: The `Scanner` lines act as breakpoints, ensuring that each step is completed before proceeding to the next. This is crucial in blockchain interactions where operations depend on the successful completion of previous steps (e.g., a transaction must be mined before its effects can be observed).

    ### Step-by-Step Guide

    1. **Initialization**: The class begins by setting up network connections and initializing services, laying the groundwork for blockchain interactions.

    2. **Wallet and Public Key**: Demonstrates wallet creation and retrieval of the associated public key, a fundamental aspect of blockchain operations.

    3. **Shop CID and IPFS Content**: Illustrates how to interact with decentralized storage (IPFS) to retrieve and display content, simulating real-world data retrieval in blockchain applications.

    4. **User Interaction for Package Selection**: Emphasizes the interactive nature of applications, where user input directly influences blockchain operations.

    5. **Validation and Transactions**: Showcases how to validate user input against blockchain data and initiate transactions based on user choices.

    6. **ENS and Signature**: Introduces more advanced concepts like ENS (Ethereum Name Service) and cryptographic signatures, highlighting the security aspects of blockchain applications.

    ### Important Considerations

    - **Security**: Always ensure sensitive operations, especially those involving private keys and signatures, are handled securely. Avoid exposing private keys in your application code.

    - **Asynchronous Nature of Blockchain**: While this example uses a synchronous approach for simplicity, real-world blockchain interactions are inherently asynchronous. Developers should consider asynchronous patterns and error handling for production applications.

    - **Network Delays and Transaction Confirmation**: Blockchain operations, particularly on public networks, can experience variable delays. Ensure your application logic accommodates these delays, particularly when waiting for transaction confirmations.





The `InitAppWeb2` class is designed to initialize the application within a Web 2.0 environment, setting up the necessary components and services for operation. Below is a step-by-step breakdown of the initialization process and operations performed by the `InitAppWeb2` class:

1. **Network and Services Initialization**
   - Initializes the Web3 service with the Mumbai test network configuration.
   - Sets up the configuration for the service provider.
   - Instantiates the cloud functions service.

    ```java
    this.Web3Service = new Web3AJ(new Mumbai());
    configServiceProvider = new configServiceProvider("test2.cellact.nl");
    cloudFunctions = new cloudFunctions();
    ```

2. **Public Key Display**
   - Retrieves and displays the public key from the wallet associated with the `Web3AJ` service.

    ```java
    System.out.println("Public Key: " + this.Web3Service.wallet.getPublicKey());
    ```

3. **Shop CID Retrieval and Display**
   - Uses the `cloudFunctions` service to retrieve the CID for the shop associated with the configured service provider.
   - Displays the shop CID, which is used to fetch content from IPFS.

    ```java
    String shopCID = cloudFunctions.getShopCID(configServiceProvider.getServiceProviderName());
    System.out.println("Shop CID: " + shopCID);
    ```

4. **IPFS Content Fetch and Display**
   - Retrieves content from IPFS using the shop CID and displays the content.

    ```java
    String ipfsContent = Web3AJ.fetchStoreFromIPFS(shopCID);
    System.out.println("IPFS Content: " + ipfsContent);
    ```

5. **Package Selection and Validation**
   - Prompts the user to select a package and validates the selection against the available packages in the IPFS content.

    ```java
    Scanner scanner = new Scanner(System.in);
    System.out.println("Enter package you want: ");
    String packageNum = scanner.nextLine();
    boolean isValid = Utils.isValidPackage(packageNum, ipfsContent);
    System.out.println("Is the package valid? " + isValid);
    ```

6. **Payment URL Generation and Display**
   - If the package selection is valid, generates a payment URL for the selected package and displays it.

    ```java
    String url = Utils.getPaymentURL(this.Web3Service.wallet.getPublicKey(), packageNum, ipfsContent);
    System.out.println("Payment URL: " + url);
    ```

7. **User ENS Retrieval and Display**
   - Retrieves the ENS name associated with the user's public key and displays it.

    ```java
    String ens = cloudFunctions.getUserENS(this.Web3Service.wallet.getPublicKey());
    System.out.println("ENS: " + ens);
    ```

8. **Message Signing**
   - Demonstrates signing a message with the user's private key and displays the signature.

    ```java
    String message = "9c71ab46-370b-40f6-8235-bf1b03da1867"; // Example message
    String signed = Web3Service.signMessage(message);
    System.out.println("Signature: " + signed);
    ```

9. **Resource Cleanup**
   - Ensures that any open resources, such as scanners, are properly closed to prevent memory leaks.

    ```java
    scanner.close();
    ```

This sequence ensures the proper initialization and operation of your application within a Web 2.0 context, including interactions with the blockchain, user input validation, content retrieval from IPFS, and transaction handling.


#### InitAppWeb3

(TBD: Initialization steps for Web3 applications.)

### Utils

Provides utility functions such as package validation, shop opening, and payment URL generation.

    isValidPackage(String userInput, String jsonData): Validates if the user input matches any of the packages listed in the provided JSON data. This function is essential for verifying user selections against available options.

    openShop(String publicKey): Opens the shop URL in a web browser, using the public key as a parameter. This is useful for directing users to a web-based storefront.

    getPaymentURL(String userID, String packageNum, String jsonData): Constructs a URL for processing payments for a selected package. This function is crucial for integrating payment gateways and facilitating transactions.

### Wallet

Manages wallet functionalities including key generation, import, and retrieval.

    generateMnemonic(): Generates a new mnemonic phrase following the BIP-39 standard. This mnemonic can be used to regenerate a wallet's private keys.

    getPrivateKeyFromMnemonic(String mnemonic): Derives the private key from the given mnemonic phrase, allowing for wallet recovery and transaction signing.

    getPublicKey(): Returns the public key derived from the wallet's private key. The public key is used to derive the wallet's address and can be safely shared.

    getCredentials(): Retrieves the wallet's credentials, including its private key, which is crucial for signing transactions and interacting with smart contracts.

### Web3AJ

Core component for interacting with the blockchain, including contract interactions, signing messages, and handling transactions.

    signMessage(String Message): Takes a string message, signs it with the private key of the current wallet, and returns the signature. This is useful for proving ownership of a wallet address without revealing the private key.

    mintNFT(String _userENS): Encodes a function call to mint an NFT with the provided ENS (Ethereum Name Service) name. It constructs and sends a transaction to mint the NFT, then returns the transaction hash.

    buyENS(String _userENS): Similar to mintNFT, but specifically for purchasing an ENS name. It sends a transaction to the ENS contract to register the name under the user's wallet address.

    getEstimatedGasForStateChanging(...): Estimates the gas required for a state-changing transaction. This is helpful to avoid setting a gas limit too low, which would result in a failed transaction.

    checkBalance(String publicKey): Returns the balance of the wallet associated with the given public key. This function is essential for monitoring wallet funds.

    fetchStoreFromIPFS(String cid): Fetches content from IPFS using the provided CID (Content Identifier). This function is useful for retrieving decentralized content.

## Examples

## Contributing

Guidelines for contributing to the SDK's development.

## License

All right reserved to B.V Cellact NL.
